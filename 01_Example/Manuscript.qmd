---
title: "A Study on Penguins: A Minimal Reproducible Example"
author:
  - name: "Josephine Zerna"
    email: "josephine.zerna@tu-dresden.de"
    orcid: 0000-0003-2892-884X
    roles:
      - conceptualization
      - writing
    affiliations:
      - id: "tu-dresden"
        name: "Technische Universit√§t Dresden"
        group: Chair of Differential and Personality Psychology
        department: Faculty of Psychology
        city: Dresden
        postal-code: 01069
  - name: "Christoph Scheffel"
    affiliation:
      - id: "tu-dresden"
    email: "christoph_scheffel@tu-dresden.de"
    orcid: 0000-0001-5963-9229
    corresponding: true
    roles:
      - project administration
      - methodology
date: "`r format(Sys.Date(), '%B %d, %Y')`"
lang: en
abstract: "This document is a minimal, reproducible manuscript using the penguins data set as an example."
keywords: [penguins, reproducibility, minimal, example]
floatsintext: false
bibliography: Bibliography.bib
format:
  #apaquarto-docx: default
  #apaquarto-html: default
  apaquarto-pdf:
    # Can be jou (journal), man (manuscript), stu (student), or doc (document)
    documentmode: man
    keep-tex: true
    pdf-engine: lualatex
    a4paper: true
---

# Introduction

Penguins are fascinating creatures that inhabit various regions of the Southern Hemisphere, including Antarctica and surrounding islands.
The study of penguins provides valuable insights into ecosystem dynamics, climate change impacts, and evolutionary biology [@smith2020; @jones2018].

This manuscript presents a minimal reproducible example utilizing the penguins dataset to demonstrate scientific workflows in R.

```{r}
#| label: "t-test"
#| echo: false

# Load penguins data set
dat <- read.csv("Data.csv")

# Remove rows with NA
dat_clean <- dat[complete.cases(dat),]

# Perform t-test
t_test_result <- t.test(bill_length_mm ~ sex, data = dat_clean, var.equal = FALSE)

```

# Methods

We conducted a two-sample Welch *t*-test to compare the average bill lengths between male and female penguins.
The null hypothesis ($H_0$) states that there is no difference in bill lengths between male and female penguins, while the alternative hypothesis ($H_1$) suggests a significant difference.

The *t*-test was performed using the `t.test()` function in R, with a significance level of 0.05.

# Results

Descriptive statistics of the data set are given in @tbl-descriptive-statistics and individual bill lengths are displayed in @fig-bill-length-comparison.

```{r}
#| label: "tbl-descriptive-statistics"
#| echo: false
#| tbl-cap: "Descriptive Statistics"
#| apa-twocolumn: true

within(dat, {
  sex[is.na(sex)] <- "unknown"
  year <- as.factor(year) # Year is more interesting if analyzed as factor
}) |>
  (\(x) { # Add number of non-missings to labels
    n <- sapply(x, \(v) sum(!is.na(v))) # Calculate number of non-missings
    labels <- paste0(names(x), " (N=", n, ")") # Paste labels and numbers together
    idx <- which(sapply(x, is.numeric)) # Get numeric variables
    names(x)[idx] <- labels[idx] # Change the labels
    x
  })() |>
  modelsummary::datasummary_balance(formula = ~ sex, output = "flextable", dinm = FALSE) |>
  flextable::theme_apa() |>
  flextable::font(fontname = "TeX Gyre Termes", part = "all")

```

```{r}
#| label: "variables"
#| echo: false

blm_female <- dat_clean$bill_length_mm[dat_clean$sex == "female"]
blm_male <- dat_clean$bill_length_mm[dat_clean$sex == "male"]
```

The *t*-test revealed a significant difference in bill lengths between male and female penguins ($t(`r round(t_test_result$parameter, digits = 2)`) = `r round(t_test_result$statistic, digits = 2)`{,}\> p `r format.pval(t_test_result$p.value, eps = 0.001, scientific = FALSE)`$).
Female penguins ($M = `r round(mean(blm_female), digits = 2)`\,\mathrm{mm}{,}\> SD = `r round(sd(blm_female), digits = 2)`\,\mathrm{mm}$) exhibited shorter bill lengths compared to male penguins ($M = `r round(mean(blm_male), digits = 2)`\,\mathrm{mm}{,}\> SD = `r round(sd(blm_male), digits = 2)`\,\mathrm{mm}$).

```{r}
#| label: "fig-bill-length-comparison"
#| echo: false
#| fig-cap: "Scatter Plot of Bill Lengths by Sex With Violin Plot Showing Quartiles"

# Create ggplot object
ggplot2::ggplot(dat_clean, ggplot2::aes(x = sex, y = bill_length_mm, fill = sex), group = sex) +
  ggplot2::geom_violin(
    draw_quantiles = c(0.25, 0.5, 0.75),
    show.legend = FALSE
  ) +
  ggplot2::geom_jitter(width = 0.15, show.legend = FALSE) +
  ggplot2::labs(x = "Sex", y = "Bill length in mm") +
  ggplot2::theme_minimal()
```

# Discussion

The significant difference in bill lengths between male and female penguins suggests potential sexual dimorphism in this trait.
This finding aligns with previous research indicating differential foraging strategies and resource partitioning between male and female penguins [@brown2015; @wilson2019].

Understanding the factors influencing bill morphology in penguins is crucial for conservation efforts and ecosystem management, particularly in the face of ongoing environmental challenges.

# References

::: {#refs}
:::